<h1>Manage Your Listing</h1>

<header class="header-wrap group">
  <h2><a href="<%= listing_url(@listing) %>"><%= @listing.title %></a></h2>
  <ul class="buttons group">
    <li><a href="<%= edit_listing_url(@listing) %>" class= "btn">Edit Listing</a></li>
    <li class="group"><%= button_to "delete listing", listing_url(@listing), method: :delete, class: "btn delete" %></li>
  </ul>
  
</header>
  
<%= render "shared/errors" %>

  <article class="content-bar interior-content group">
    
    <h3>Pending Bookings</h3>
    
    <ul class="rep-content group" id="pending-booking-list">
    
    <% unless @pending_bookings.any? %>
      <li>You have no pending bookings</li>
    <% else %>
    
      <% @pending_bookings.each do |booking| %>
        <li>
          <%= render "details", booking: booking %>
        </li>
      <% end %>
      
    <% end %>
    </ul>
  </article>
  
  <article class="content-bar interior-content group">
    
    <h3>Confirmed Bookings</h3>
    
    <ul class="rep-content group" id="confirmed-booking-list">
    
    <% unless @confirmed_bookings.any? %>
    
      <li>You have no confirmed bookings</li>
    <% else %>
    
      <% @confirmed_bookings.each do |booking| %>
      <li class="group">
        <%= render "details", booking: booking %>
       </li> 
      <% end %>
      
    <% end %>
  </article>
</section>

<script type="application/json" id="bootstrapped-confirmed">
  <%= (render partial: 'bookings/bookings_info.json.jbuilder', locals: {bookings: @confirmed_bookings} ).html_safe %>
</script>

<script type="application/json" id="bootstrapped-pending">
  <%= (render partial: 'bookings/bookings_info.json.jbuilder', locals: {bookings: @pending_bookings} ).html_safe %>
</script>

<script>
  $(document).ready(function(){   
    Sharebnb.initialize();
  });
</script>